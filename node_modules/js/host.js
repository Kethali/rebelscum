/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

var socket = io.connect();
var $messageForm = $('#send-message');
var $messageBox = $('#message');
var $chat = $('#chat');

//when the submit button is clicked "e" is the event
$messageForm.submit(function (e) {
    //prevent the default setting of page refreshing
    e.preventDefault();
    //send the message input to the server
    socket.emit('send message', $messageBox.val());
    //clear out the input box
    $messageBox.val('');
});

//when socket emit a message to each user
socket.on('new message', function (data) {
    //append teh message into the "chat" div
    $chat.append(data + "</br>");
});

var nameList = ["Katarina", "Uriel", "Connor", "Theodora", "Koala", "Elliana", "Nicky", "Denny", "Humanshield", "Ewreck", "Minkie", "Derothaan", "Yi", "Sam", "Panda", "Nova", "Teemo", "Morgana", "Kerrigan", "Murky", "Mark"];

vm = new Vue({
    el: '#main',
    data: {
        currentGame: {},
        playerName: "",
        games: games
    },
    methods: {
        newGame: function () {
            new game;
        },
        joinGame: function (gameID) {
//            if (!this.playerName) {
//                this.playerName = this.genRandomName();
//            }
//            this.currentGame = joinEvent(gameID, this.playerName);
            this.currentGame = joinEvent(gameID, this.genRandomName());

        },
        genRandomName: function () {
            index = Math.floor(Math.random() * nameList.length);
            return nameList.splice(index, 1)[0];
        }
    }
});
